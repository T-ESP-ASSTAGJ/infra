---
# Initial VM Setup - Common system configuration
# This playbook prepares VMs with base system setup

- name: Initial VM Setup
  hosts: all
  become: true
  gather_facts: true

  pre_tasks:
    - name: Wait for system to become reachable
      wait_for_connection:
        timeout: 300

    - name: Gather facts after connection
      setup:

  roles:
    - role: common
      tags:
        - common
        - base

  post_tasks:
    - name: Verify setup completion
      ansible.builtin.debug:
        msg: "Base system setup completed successfully for {{ inventory_hostname }}"